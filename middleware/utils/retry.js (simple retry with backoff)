// utils/retry.js
export async function retryWithBackoff(fn, opts = {}) {
const retries = opts.retries ?? 3;
const baseDelay = opts.baseDelay ?? 500; // ms


for (let i = 0; i <= retries; i++) {
try {
return await fn();
} catch (err) {
if (i === retries) throw err;
const delay = baseDelay * Math.pow(2, i);
await new Promise((res) => setTimeout(res, delay));
}
}
}
